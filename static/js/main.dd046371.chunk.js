(this.webpackJsonpcodepair=this.webpackJsonpcodepair||[]).push([[0],{166:function(e,t){},167:function(e,t){},222:function(e,t){},226:function(e,t){},349:function(e,t){},442:function(e,t){},496:function(e,t,n){},497:function(e,t,n){"use strict";n.r(t);var a,r,i,o=n(0),c=n.n(o),l=n(22),s=n.n(l),u=n(11),d=n(136),p=n.n(d),m=n(180),f=n(74),h=n(589),v=n(586),b=n(271),g=n(588),y=n(272),k=n(587),E=n(47),O=n(8),w=n(6),j=function(){function e(t){Object(O.a)(this,e),this.key=void 0,this.storage=void 0,this.key=t,this.storage=window.localStorage}return Object(w.a)(e,[{key:"getValue",value:function(e){try{return JSON.parse(this.storage[this.key])}catch(t){return e}}},{key:"setValue",value:function(e){this.storage[this.key]=JSON.stringify(e)}}]),e}();!function(e){e.Dark="dark",e.Light="light"}(a||(a={})),function(e){e.Sublime="sublime",e.Vim="vim",e.Emacs="emacs"}(r||(r={})),function(e){e.Two="2",e.Four="4",e.Eight="8"}(i||(i={}));var C=new j("$$codepair$$setting"),x=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,S=C.getValue({menu:{theme:x?a.Dark:a.Light,codeKeyMap:r.Sublime,tabSize:i.Two,userName:"",userColor:""}}),L=Object(E.c)({name:"setting",initialState:S,reducers:{setDarkMode:function(e,t){e.menu.theme=t.payload?a.Dark:a.Light,C.setValue(e)},setCodeKeyMap:function(e,t){e.menu.codeKeyMap=t.payload,C.setValue(e)},setTabSize:function(e,t){e.menu.tabSize=t.payload,C.setValue(e)},setUserName:function(e,t){e.menu.userName=t.payload,C.setValue(e)},setUserColor:function(e,t){e.menu.userColor=t.payload,C.setValue(e)}}}),T=L.actions,M=T.setDarkMode,D=T.setCodeKeyMap,N=T.setTabSize,R=T.setUserName,z=T.setUserColor,I=L.reducer,A=n(546),W=n(596),P=n(551),H=n(558),B=n(556),V=n(557),G=n(94),U=n(260),F=n.n(U),K=n(9),Y=n(503),$=n(548),X=n(595),J=n(140),_=n.n(J),q=n(542);function Q(e){var t=e.anchorEl,n=e.onClose,a=e.children,r=e.anchorOrigin,i=e.transformOrigin,o=Boolean(t);return c.a.createElement(q.a,{id:o?"simple-popover":void 0,open:o,anchorEl:t,onClose:n,anchorOrigin:r,transformOrigin:i},a)}Q.defaultProps={anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}};var Z,ee=n(547),te=n(500),ne=Object(A.a)((function(){return{root:function(e){return{color:e.peer.presence.color}}}}));function ae(e){var t=ne(e),n=e.peer;return c.a.createElement(te.a,{className:t.root},n.presence.username)}!function(e){e.Connected="connected",e.Disconnected="disconnected"}(Z||(Z={}));var re=Object(E.c)({name:"peer",initialState:{peers:{}},reducers:{syncPeer:function(e,t){for(var n=t.payload,a=n.myClientID,r=n.changedPeers,i=e.peers,o=0,c=Object.keys(i);o<c.length;o++){var l=c[o];r[l]||(i[l].status=Z.Disconnected)}for(var s=0,u=Object.entries(r);s<u.length;s++){var d=Object(K.a)(u[s],2),p=d[0],m=d[1];if(!i[p]||i[p].status===Z.Disconnected){var f={id:p,status:Z.Connected,presence:m,isMine:a===p};e.peers[p]=f}}}}}),ie=Object(E.b)("presence/update",(function(e,t){try{var n=t.getState().docState.client,a=e;return void(null===n||void 0===n||n.updatePresence("color",a))}catch(r){return t.rejectWithValue(r.message)}})),oe=re.actions.syncPeer,ce=re.reducer;function le(){var e=Object(u.c)((function(e){return e.docState.client})),t=Object(u.c)((function(e){return e.peerState.peers}));return{activePeers:Object(o.useMemo)((function(){return e?Object.values(t).filter((function(e){return e.status===Z.Connected})):[]}),[e,t])}}function se(){var e=le().activePeers;return c.a.createElement(ee.a,null,c.a.createElement(te.a,null,c.a.createElement(G.a,null,"Total ",e.length)),e.map((function(e){return c.a.createElement(ae,{key:e.id,peer:e})})))}var ue=Object(A.a)((function(e){return{group:{"& > *":{cursor:"pointer"}},myAvatar:{borderColor:e.palette.secondary.main,"&:before":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",border:"2px solid ".concat(e.palette.secondary.main)}}}}));function de(){var e=ue(),t=Object(u.c)((function(e){return e.docState.client})),n=Object(u.c)((function(e){return e.peerState.peers})),a=le().activePeers,r=Object(o.useState)(),i=Object(K.a)(r,2),l=i[0],s=i[1],d=Object(o.useCallback)((function(e){e.target.getAttribute("data-id")||s(e.currentTarget)}),[s]),p=Object(o.useCallback)((function(){s(void 0)}),[s]);return t?c.a.createElement(c.a.Fragment,null,c.a.createElement($.a,{className:e.group,max:4,onClick:d},a.map((function(t){var a=n[t.id].presence,r=a.username,i=a.color,o=a.image;return c.a.createElement(X.a,{key:t.id,title:t.isMine?"[ME] ".concat(r):r,"data-id":t.id,arrow:!0},c.a.createElement(Y.a,{alt:"Peer Image",className:t.isMine?e.myAvatar:"",style:{backgroundColor:i},src:_.a.getImage(o)}))}))),c.a.createElement(Q,{anchorEl:l,onClose:p},c.a.createElement(se,null))):null}var pe=n(252),me=n(590),fe=n(555),he=n(256),ve=n.n(he),be=n(257),ge=n.n(be),ye=n(149),ke=n(5),Ee=n(554),Oe=n(550),we=n(552),je=n(553),Ce=n(253),xe=n.n(Ce),Se=n(549),Le=Object(ke.a)((function(e){return Object(W.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})}))((function(e){var t=e.children,n=e.classes,a=e.onClose,r=Object(ye.a)(e,["children","classes","onClose"]);return c.a.createElement(Oe.a,Object.assign({disableTypography:!0,className:n.root},r),c.a.createElement(G.a,{variant:"h6"},t),a?c.a.createElement(P.a,{"aria-label":"close",className:n.closeButton,onClick:a},c.a.createElement(xe.a,null)):null)})),Te=Object(ke.a)((function(e){return{root:{padding:e.spacing(2)}}}))(we.a),Me=Object(ke.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(je.a);function De(e){var t=e.open,n=e.onClose,a=e.className,r=e.children;return t?c.a.createElement(Ee.a,{onClose:n,open:t,maxWidth:"md"},c.a.createElement("div",{className:a},r)):null}De.defaultProps={className:""};var Ne=De,Re=n(278);function ze(e){var t=e.timeout,n=e.show,a=e.onFadeout,r=e.children,i=Object(o.useRef)(null);return Object(o.useEffect)((function(){return n&&(i.current=window.setTimeout((function(){a(),i.current=null}),t)),function(){i.current&&clearTimeout(i.current)}}),[n]),c.a.createElement(Re.a,{in:n},c.a.createElement("div",null,n?r:null))}ze.defaultProps={timeout:1e3};var Ie,Ae,We,Pe=ze,He=n(71),Be=n.n(He),Ve=n(121),Ge=n(150),Ue=n.n(Ge),Fe=n(254),Ke=n.n(Fe);!function(e){e.HTML="html",e.Slide="slide"}(Ie||(Ie={})),function(e){e.Markdown="gfm",e.Go="go",e.JavaScript="javascript",e.Clojure="clojure",e.Dart="dart",e.Python="python",e.Ruby="ruby",e.Rust="rust"}(Ae||(Ae={})),function(e){e.Disconnect="disconnect",e.Connect="connect"}(We||(We={}));var Ye={mode:Ae.Markdown,preview:Ie.HTML,loading:!0,errorMessage:"",status:We.Connect},$e=Object(E.b)("doc/activate",function(){var e=Object(Ve.a)(Be.a.mark((function e(t,n){var a,r,i,o,c,l,s,u,d;return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=_.a.generate(),r=a.name,i=a.animal,o=n.getState().settingState,c=o.menu,l=c.userName,s=c.userColor,(u={apiKey:"",presence:{username:l||r,image:i,color:s||Ke()(),board:""}}).apiKey="".concat("cbovg64qfu96agb5i0fg"),d=new Ue.a.Client("".concat("https://api.yorkie.dev"),u),e.next=9,d.activate();case 9:return e.abrupt("return",{client:d});case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()),Xe=Object(E.b)("doc/attach",function(){var e=Object(Ve.a)(Be.a.mark((function e(t,n){var a,r;return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,r=t.doc,e.prev=1,e.next=4,a.attach(r);case 4:return r.update((function(e){e.content||(e.content=new Ue.a.Text),e.shapes||(e.shapes=[])})),e.next=7,a.sync();case 7:return e.abrupt("return",{doc:r,client:a});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",n.rejectWithValue(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),Je=Object(E.c)({name:"doc",initialState:Ye,reducers:{deactivateClient:function(e){var t=e.client;e.client=void 0,null===t||void 0===t||t.deactivate()},createDocument:function(e,t){e.doc=new Ue.a.Document("codepairs-".concat(t.payload))},detachDocument:function(e){var t=e.doc,n=e.client;e.doc=void 0,null===n||void 0===n||n.detach(t)},attachDocLoading:function(e,t){e.loading=t.payload},setCodeMode:function(e,t){e.mode=t.payload},setPreview:function(e,t){e.preview=t.payload},setStatus:function(e,t){e.status=t.payload}},extraReducers:function(e){e.addCase($e.fulfilled,(function(e,t){var n=t.payload;e.client=n.client})),e.addCase($e.rejected,(function(e,t){var n=t.payload;e.errorMessage=n})),e.addCase(Xe.fulfilled,(function(e,t){var n=t.payload;e.doc=n.doc,e.client=n.client})),e.addCase(Xe.rejected,(function(e,t){var n=t.payload;e.errorMessage=n}))}}),_e=Je.actions,qe=_e.deactivateClient,Qe=_e.createDocument,Ze=_e.detachDocument,et=_e.attachDocLoading,tt=_e.setPreview,nt=_e.setCodeMode,at=_e.setStatus,rt=Je.reducer,it=n(255),ot=n.n(it),ct=Object(A.a)((function(){return{dialog:{borderRadius:"4px"},input:{width:"300px",padding:"12px 8px",fontSize:"18px",borderRadius:"5px",outline:"none",backgroundColor:"hsla(0,0%,100%,0.9)"},box:{"@media only screen and (max-width: 600px)":{display:"none"}},button:{lineHeight:"32px"}}}));function lt(){var e=ct(),t=Object(u.c)((function(e){return e.docState.status})),n=Object(o.useState)(!1),a=Object(K.a)(n,2),r=a[0],i=a[1],l=Object(o.useState)(!1),s=Object(K.a)(l,2),d=s[0],p=s[1],m=Object(o.useRef)(null),f=window.location.href.split("?")[0],h=Object(o.useCallback)((function(){var e;null===(e=m.current)||void 0===e||e.select()}),[]),v=Object(o.useCallback)((function(){p(!0)}),[]),b=Object(o.useCallback)((function(){i(!0)}),[]),g=Object(o.useCallback)((function(){i(!1)}),[]);return c.a.createElement("div",{className:e.box},c.a.createElement(fe.a,{className:e.button,size:"small",color:"primary",variant:"contained",startIcon:c.a.createElement(ve.a,null),onClick:b,disabled:t===We.Disconnect},"Share"),c.a.createElement(Ne,{open:r,onClose:g,className:e.dialog},c.a.createElement(Le,{onClose:g},"Share Code"),c.a.createElement(Te,{dividers:!0},c.a.createElement(me.a,{my:3},c.a.createElement(G.a,null,"Anyone can access the code in real time through this URL.")),c.a.createElement(me.a,{my:1},c.a.createElement(Se.a,null,"Share this URL")),c.a.createElement(me.a,{display:"flex"},c.a.createElement("input",{readOnly:!0,ref:m,className:e.input,value:f,onFocus:h}),c.a.createElement(pe.CopyToClipboard,{text:f,onCopy:v},c.a.createElement(P.a,{color:"primary"},c.a.createElement(ge.a,null))),c.a.createElement(Pe,{show:d,onFadeout:function(){return p(!1)}},c.a.createElement("p",null,"Copy!"))),c.a.createElement(me.a,{my:1,style:{marginTop:10}},c.a.createElement(Se.a,null,"QRCode")),c.a.createElement(me.a,null,c.a.createElement(P.a,{"aria-label":"selector"},c.a.createElement(ot.a,{value:f,style:{width:150,height:150}})))),c.a.createElement(Me,null,c.a.createElement(fe.a,{onClick:g,color:"primary",variant:"contained",autoFocus:!0},"Close"))))}var st=n(259),ut=n.n(st),dt=n(258),pt=n.n(dt),mt=Object(A.a)((function(){return Object(W.a)({root:{width:"380px"},title:{backgroundColor:"hsla(0,0%,100%,0.1)","& > *":{fontWeight:"bold"}}})}));function ft(e){var t=e.title,n=e.subTitle,a=e.content,r=mt();return c.a.createElement("div",{className:r.root},c.a.createElement(me.a,{px:2,py:1.5,className:r.title},c.a.createElement(G.a,{variant:"subtitle1"},t)),c.a.createElement(me.a,{px:2,p:1},c.a.createElement(me.a,{py:1},c.a.createElement(G.a,{variant:"body1"},n)),c.a.createElement(me.a,{pb:2.5},c.a.createElement(G.a,{variant:"body2"},a))))}function ht(e){var t=Object(o.useState)(),n=Object(K.a)(t,2),a=n[0],r=n[1],i=e.hasLocalChanges,l=Object(o.useCallback)((function(e){r(e.currentTarget)}),[]),s=Object(o.useCallback)((function(){r(void 0)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(fe.a,{"aria-label":"doc-status",color:"secondary",startIcon:c.a.createElement(pt.a,null),onClick:l},"Working offline"),c.a.createElement(Q,{anchorEl:a,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},c.a.createElement(ft,{title:i?"There are changes that couldn't be sent to Server":"All Changes saved to Server",subTitle:"This document is ready for offline use",content:"Looks like you're offline. Changes will save to this memory now, and save to Server once reconnected."})))}function vt(){var e=Object(o.useState)(),t=Object(K.a)(e,2),n=t[0],a=t[1],r=Object(o.useCallback)((function(e){a(e.currentTarget)}),[]),i=Object(o.useCallback)((function(){a(void 0)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(fe.a,{"aria-label":"doc-status",color:"secondary",onClick:r},c.a.createElement(ut.a,null)),c.a.createElement(Q,{anchorEl:n,onClose:i,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},c.a.createElement(ft,{title:"All Changes saved to Server",subTitle:"This document is ready for offline use",content:"You can edit this document without an internet connection. Changes will save to Server once reconnected."})))}function bt(){var e=Object(u.c)((function(e){return e.docState.status})),t=Object(u.c)((function(e){return!!e.docState.doc&&e.docState.doc.hasLocalChanges()}));return e===We.Connect?c.a.createElement(vt,null):c.a.createElement(ht,{hasLocalChanges:t})}var gt=n(10),yt=n(2),kt=new j("$$codepair$$link"),Et=kt.getValue({openTab:!1,groups:[],opens:{}});function Ot(e,t,n){t.forEach((function(t){n(t,e),Ot(t,t.links||[],n)}))}function wt(e,t){var n=null;return Ot(null,e,(function(e){t(e)&&(n=e)})),n}var jt=Object(E.c)({name:"link",initialState:Et,reducers:{toggleLinkTab:function(e){e.openTab=!e.openTab,kt.setValue(e)},toggleLinkOpen:function(e,t){var n=t.payload;e.opens[n]=!e.opens[n],kt.setValue(e)},removeLink:function(e,t){var n=t.payload.id;Ot(e,e.groups,(function(e,t){e.id===n&&(t.links=t.links.filter((function(e){return e.id!==n})))})),kt.setValue(e)},removeGroup:function(e,t){var n=t.payload.id;Ot(e,e.groups,(function(e,t){e.id===n&&(t.links=t.links.filter((function(e){return e.id!==n})))})),kt.setValue(e)},setLinkOpens:function(e,t){e.opens=Object(yt.a)(Object(yt.a)({},e.opens),t.payload),kt.setValue(e)},setLinkName:function(e,t){var n=t.payload,a=n.id,r=n.name,i=wt(e.groups,(function(e){return e.id===a}));i&&(i.name=r),kt.setValue(e)},setLinkFileLink:function(e,t){var n=t.payload,a=n.id,r=n.name,i=n.fileLink,o=wt(e.groups,(function(e){return e.id===a}));o&&(o.fileLink=i,o.name=r),kt.setValue(e)},newGroup:function(e,t){var n=t.payload;e.groups=[].concat(Object(gt.a)(e.groups),[{type:"group",id:"".concat(Date.now()),name:n,links:[]}]),kt.setValue(e)},newGroupAt:function(e,t){var n=t.payload,a=[];e.groups.forEach((function(e){a.push(e),e.id===n.id&&a.push({type:"group",id:"".concat(Date.now()),name:n.name,links:[]})})),e.groups=a,kt.setValue(e)},newChildGroupAt:function(e,t){var n=t.payload,a=wt(e.groups,(function(e){return e.id===n.parentId}));if(a){var r={type:"group",id:"".concat(Date.now()),name:n.name,links:[]};a.links=[].concat(Object(gt.a)(a.links),[r]),e.opens[n.parentId]=!0}kt.setValue(e)},newLink:function(e,t){var n=t.payload,a=n.parentId,r=n.name;Ot(e,e.groups,(function(t){var n=t;t.id===a&&(n.links||(n.links=[]),n.links=[].concat(Object(gt.a)(n.links),[{id:"".concat(Date.now()),name:r,fileLink:"".concat(Math.random().toString(36).substring(7)),linkType:"pairy"}]),e.opens[a]=!0)})),kt.setValue(e)},newLinkByCurrentPage:function(e,t){var n=t.payload,a=n.parentId,r=n.name,i=n.fileLink;Ot(e,e.groups,(function(e){var t=e;e.id===a&&(t.links||(t.links=[]),t.links=[].concat(Object(gt.a)(t.links),[{id:"".concat(Date.now()),name:r,fileLink:i,linkType:"pairy"}]))})),kt.setValue(e)}}}),Ct=jt.actions,xt=Ct.toggleLinkTab,St=Ct.toggleLinkOpen,Lt=Ct.setLinkName,Tt=Ct.newLinkByCurrentPage,Mt=Ct.setLinkFileLink,Dt=Ct.removeLink,Nt=Ct.removeGroup,Rt=Ct.newLink,zt=Ct.setLinkOpens,It=Ct.newGroup,At=Ct.newGroupAt,Wt=Ct.newChildGroupAt,Pt=jt.reducer,Ht=Object(A.a)((function(e){return Object(W.a)({root:{flexGrow:1},appBar:{backgroundColor:"black",color:"white"},iconButton:{marginRight:e.spacing(2),color:"white"},grow:{flexGrow:1},title:{fontWeight:"bold",color:e.palette.primary.main,marginRight:e.spacing(1)},yorkie:{"& > a":{textDecoration:"none",color:"#b5b0a1",fontSize:12}},items:{display:"flex","& > *":{margin:e.spacing(1)}}})}));function Bt(){var e=Ht(),t=Object(u.b)();return c.a.createElement("div",{className:e.root},c.a.createElement(B.a,{position:"static",className:e.appBar},c.a.createElement(V.a,null,c.a.createElement(P.a,{size:"small",onClick:function(){t(xt())},className:e.iconButton},c.a.createElement(F.a,null)),c.a.createElement(G.a,{variant:"h6",className:e.title},c.a.createElement(H.a,{href:"/",underline:"none"},"CodePair")),c.a.createElement(G.a,{className:e.yorkie},c.a.createElement("a",{href:"https://yorkie.dev",target:"_blank",rel:"noreferrer"},"Powered by Yorkie")),c.a.createElement(bt,null),c.a.createElement("div",{className:e.grow}),c.a.createElement("div",{className:e.items},c.a.createElement(lt,null),c.a.createElement(de,null)))))}var Vt,Gt=Object(o.memo)(Bt),Ut=n(594),Ft=n(591),Kt=n(565),Yt=n(23),$t=n(261),Xt=n.n($t),Jt=n(262),_t=n.n(Jt);!function(e){e.Deactivated="deactivated",e.Activated="activated"}(Vt||(Vt={}));var qt=function(){function e(t,n){Object(O.a)(this,e),this.id=void 0,this.username=void 0,this.color=void 0,this.height=void 0,this.marker=void 0,this.lineMarker=void 0,this.status=void 0,this.nameRemoveTimeMap=void 0,this.nameAnimationDelay=void 0,this.nameAnimationDuration=void 0,this.nameRemoveTime=void 0,this.nameHolder=void 0,this.cursorHolder=void 0,this.id=t,this.username=n.username,this.color=n.color,this.height=0,this.status=Vt.Deactivated,this.nameRemoveTimeMap=new Map,this.nameAnimationDelay=1,this.nameAnimationDuration=.2,this.nameRemoveTime=1e3*(this.nameAnimationDuration+this.nameAnimationDelay)}return Object(w.a)(e,[{key:"updateCursor",value:function(e,t){var n=this;this.removeCursor(),this.status=Vt.Activated;var a,r=e.cursorCoords(t);(this.height=r.bottom-r.top,this.cursorHolder)||(this.cursorHolder=document.createElement("span"),this.cursorHolder.classList.add("codePair-cursor"),this.cursorHolder.style.borderLeftColor=this.color,this.cursorHolder.addEventListener("mouseenter",(function(){var e;(n.nameRemoveTimeMap.has(n.id)&&clearTimeout(n.nameRemoveTimeMap.get(n.id)),n.nameHolder)&&(n.nameHolder.classList.remove("text-remove"),null===(e=n.cursorHolder)||void 0===e||e.appendChild(n.nameHolder))})),this.cursorHolder.addEventListener("mouseleave",(function(){n.nameHolder&&(n.nameHolder.classList.add("text-remove"),n.nameHolder.style.animationDuration="".concat(n.nameAnimationDuration,"s"),n.nameHolder.style.animationDelay="".concat(n.nameAnimationDelay,"s"))})),null===(a=this.nameHolder)||void 0===a||a.addEventListener("animationend",(function(){var e;(null===(e=n.nameHolder)||void 0===e?void 0:e.classList.contains("text-remove"))&&n.nameRemoveTimeMap.delete(n.id)})));this.cursorHolder.style.height="".concat(this.height,"px"),this.cursorHolder.setAttribute("data-pos",r.top<130?"top":"bottom"),this.marker=e.setBookmark(t,{widget:this.cursorHolder,insertLeft:!0}),this.showCursorNameReserve(this.cursorHolder)}},{key:"updateLine",value:function(e,t,n){this.removeLine(),this.status=Vt.Activated;var a=parseInt(this.color.slice(1,3),16),r=parseInt(this.color.slice(3,5),16),i=parseInt(this.color.slice(5,7),16),o="rgba(".concat(a,", ").concat(r,", ").concat(i,", 0.15)");this.lineMarker=e.getDoc().markText(t,n,{css:"background-color : ".concat(o,";")})}},{key:"showCursorNameReserve",value:function(e){this.nameHolder||(this.nameHolder=document.createElement("span"),this.nameHolder.classList.add("codePair-name"),this.nameHolder.textContent=this.username,this.nameHolder.style.backgroundColor=this.color,this.nameHolder.style.color=_t()(this.color,!0)),this.nameHolder.parentElement!==e&&e.appendChild(this.nameHolder),this.nameHolder.classList.remove("text-remove"),this.resetRemoveNameReserve(this.nameHolder)}},{key:"resetRemoveNameReserve",value:function(e){this.nameRemoveTimeMap.has(this.id)&&clearTimeout(this.nameRemoveTimeMap.get(this.id)),this.removeNameReserve(e)}},{key:"removeNameReserve",value:function(e){var t=this,n=setTimeout((function(){if(e){e.classList.add("text-remove");var n=e.style;n.animationDuration="".concat(t.nameAnimationDuration,"s"),n.animationDelay="".concat(t.nameAnimationDelay,"s")}}),this.nameRemoveTime);this.nameRemoveTimeMap.set(this.id,n)}},{key:"removeCursor",value:function(){this.marker&&(this.marker.clear(),this.marker=void 0)}},{key:"removeLine",value:function(){this.lineMarker&&(this.lineMarker.clear(),this.lineMarker=void 0)}},{key:"clear",value:function(){this.removeCursor(),this.removeLine()}},{key:"isActive",value:function(){return this.status===Vt.Activated}}]),e}(),Qt=n(263),Zt=function(){function e(t){Object(O.a)(this,e),this.marpit=void 0,this.theme=void 0,this.marpit=new Qt.Marpit({inlineSVG:!0}),this.theme=t;this.marpit.themeSet.default=this.marpit.themeSet.add("\n    /* @theme example */\n      section {\n      background-color: #000;\n      color: #fff;\n      font-size: 30px;\n      padding: 40px;\n      margin: 10px;\n      border: 10px solid black;\n    }\n\n    h1, h2 {\n      text-align: center;\n      margin: 0;\n    }\n\n    h1 {\n      color: #fff;\n    }\n    ")}return Object(w.a)(e,[{key:"render",value:function(e){return this.marpit.render(e)}}]),e}(),en=(n(490),n(491),n(492),n(493),n(13)),tn=n.n(en);tn.a.Vim.defineEx("shuffle","shuf",(function(e,t){var n=t.line||e.firstLine(),a=t.lineEnd||t.line||e.lastLine();if(n!==a){for(var r=new tn.a.Pos(n,0),i=new tn.a.Pos(a,e.getLine(a).length),o=e.getRange(r,i).split("\n"),c=o.length-1;c>0;c-=1){var l=Math.floor(Math.random()*(c+1)),s=[o[l],o[c]];o[c]=s[0],o[l]=s[1]}e.replaceRange(o.join("\n"),r,i)}}));var nn=[];function an(e){for(var t=e.getDoc(),n=t.lineCount(),a=[],r=0;r<n;r+=1){var i=t.getLine(r),o=e.getTokenTypeAt({line:r,ch:1})||"";if(!1!==(null===o||void 0===o?void 0:o.includes("header"))){var c=i.match(/^(#+)\s+(.*)/);if(c){var l=c[1].length,s=c[2];a.push({level:l,text:s,originalText:i})}}}var u={isCached:!0,headings:[]};if(a.length!==nn.length)return nn=a,u.headings=a,u.isCached=!1,u;if(a.length>0)for(var d=0;d<a.length;d+=1){if(a[d].text!==nn[d].text){nn=a,u.headings=a,u.isCached=!1;break}if(a[d].level!==nn[d].level){nn=a,u.headings=a,u.isCached=!1;break}}return u}function rn(e){var t=document.getElementById("tableOfContents");t&&(t.innerHTML='\n    <h3 style="padding: 5px 10px;margin:0px;">\n      <button \n        class="close" \n        style="font-size:20px;border:0px;background:transparent;cursor:pointer;float:right;"\n      >&times;</button>\n    </h3>\n    <ul style="list-style-type: none;padding-left: 0px;padding: 10px;">'.concat(e.map((function(e){return'\n          <li class="level-'.concat(e.level,'" \n              data-text="').concat(e.originalText,'" \n              style="padding-left: ').concat(10*(e.level-1),'px;margin-bottom: 5px;"\n          >\n            <a href="#').concat(encodeURIComponent(e.originalText||""),'" \n              style="text-decoration: none;color:black;">').concat(e.text,"</a>\n          </li>\n        ")})).join(""),"</ul>"))}var on,cn,ln=Object(A.a)((function(e){return Object(W.a)({dark:{"& .CodeMirror":{color:e.palette.common.white,borderColor:e.palette.background.paper,backgroundColor:e.palette.background.paper},"& .CodeMirror-cursor":{borderLeftColor:e.palette.common.white,color:e.palette.common.white},"& .editor-toolbar":{backgroundColor:"#303030"},"& .editor-toolbar > *":{color:e.palette.common.white},"& .editor-toolbar > .active, .editor-toolbar > button:hover, .editor-preview pre, .cm-s-easymde":{backgroundColor:e.palette.background.paper},"& .editor-preview":{backgroundColor:e.palette.background.default},"& .CodeMirror-line span.cm-keyword":{color:"#f92672"},"& .CodeMirror-line span.cm-atom":{color:"#ae81ff"},"& .CodeMirror-line span.cm-number":{color:"#ae81ff"},"& .CodeMirror-line span.cm-def":{color:"#bc9262"},"& .CodeMirror-line span.cm-variable":{color:"#f8f8f2"},"& .CodeMirror-line span.cm-property":{color:"#a6e22e"},"& .CodeMirror-line span.cm-operator":{color:"#fff"},"& .CodeMirror-line span.cm-string":{color:"#e6db74"},"& .CodeMirror-line span.cm-string-2":{color:"#e6db74"},"& .CodeMirror-line span.cm-meta":{color:"#555"},"& .CodeMirror-line span.cm-error":{background:"#f92672",color:"#f8f8f0"},"& .CodeMirror-line span.cm-qualifier":{color:"#555"},"& .CodeMirror-line span.cm-builtin":{color:"#66d9ef"},"& .CodeMirror-line span.cm-bracket":{color:"#f8f8f2"},"& .CodeMirror-line span.cm-tag":{color:"#bc6283"},"& .CodeMirror-line span.cm-attribute":{color:"#97b757"},"& .CodeMirror-line span.cm-hr":{color:"#999"}}})}));function sn(e){var t=e.forwardedRef,n=ln(),r=Object(u.c)((function(e){return e.docState.doc})),i=Object(u.c)((function(e){return e.docState.preview})),l=Object(u.c)((function(e){return e.settingState.menu})),s=Object(u.c)((function(e){return e.docState.client})),d=Object(u.c)((function(e){return e.peerState.peers})),p=Object(o.useRef)(new Map),m=Object(o.useState)(null),f=Object(K.a)(m,2),h=f[0],v=f[1],b=Object(o.useCallback)((function(e,t){p.current.set(e,new qt(e,t))}),[]),g=Object(o.useCallback)((function(e){p.current.has(e)&&(p.current.get(e).clear(),p.current.delete(e))}),[]),y=Object(o.useCallback)((function(e){v(e)}),[]),k=Object(o.useCallback)((function(e){var t=decodeURIComponent(window.location.hash.replace("#","")),n=e.getSearchCursor(t);n.find()&&(e.setCursor(n.from()),e.scrollIntoView(n.from()))}),[]),E=Object(o.useCallback)((function(e){var t=document.getElementById("tableOfContents");if(t){var n=t.style.display;if(t.style.display="none"===n?"block":"none","block"===t.style.display&&e){var a=an(e);!1===a.isCached&&rn(a.headings)}}}),[]);Object(o.useEffect)((function(){for(var e=0,t=Object.entries(d);e<t.length;e++){var n=Object(K.a)(t[e],2),a=n[0],r=n[1];p.current.has(a)&&r.status===Z.Disconnected?g(a):p.current.has(a)||r.status!==Z.Connected||b(a,r.presence)}}),[d,b,g]),Object(o.useEffect)((function(){if(s&&r&&h){t.current=h;var e=function(e,t){var n=p.current.get(e);null===n||void 0===n||n.updateCursor(h,t)},n=function(){};r.subscribe((function(t){if("remote-change"===t.type){var a,r=Object(Yt.a)(t.value);try{for(r.s();!(a=r.n()).done;){var i=a.value.change.getID().getActorID();if(i!==s.getID()){if(!p.current.has(i))return;if(p.current.get(i).isActive())return;e(i,h.posFromIndex(0))}}}catch(o){r.e(o)}finally{r.f()}}else"snapshot"===t.type&&n()})),h.on("mousedown",(function(e,t){if(t.metaKey){var n,a=h.coordsChar({left:t.clientX,top:t.clientY}),r=h.getTokenAt(a);(null===(n=r.type)||void 0===n?void 0:n.includes("link"))&&window.open(r.string,r.string)}})),h.on("change",(function(e){var t=document.getElementById("tableOfContents");if("block"===(null===t||void 0===t?void 0:t.style.display)){var n=an(e);!1===n.isCached&&rn(n.headings)}})),h.on("beforeChange",(function(e,t){if("yorkie"!==t.origin&&"setValue"!==t.origin){var n=h.indexFromPos(t.from),a=h.indexFromPos(t.to),i=t.text.join("\n");r.update((function(e){e.content.edit(n,a,i)}))}})),h.on("beforeSelectionChange",(function(e,t){if(t.origin){var n=h.indexFromPos(t.ranges[0].anchor),a=h.indexFromPos(t.ranges[0].head);r.update((function(e){e.content.select(n,a)}))}}));var a=function(t){t.forEach((function(t){var n=t.actor,a=t.from,r=t.to;if("content"===t.type){var i,o=(null===(i=t.value)||void 0===i?void 0:i.content)||"";if(n!==s.getID()){var c=h.posFromIndex(a),l=h.posFromIndex(r);h.replaceRange(o,c,l,"yorkie")}}else if("selection"===t.type&&n!==s.getID()){var u=h.posFromIndex(a),d=h.posFromIndex(r);if(e(n,d),a>r){var m=[u,d];d=m[0],u=m[1]}!function(e,t,n){var a=p.current.get(e);null===a||void 0===a||a.updateLine(h,t,n)}(n,u,d)}}))};(n=function(){var e=r.getRoot().content;e.onChanges(a),h.setValue(e.toString())})(),h.addKeyMap(l.codeKeyMap),h.setOption("keyMap",l.codeKeyMap),h.getDoc().clearHistory(),h.focus(),k(h);var i=an(h);!1===i.isCached&&rn(i.headings);var o=document.getElementById("tableOfContents");o&&o.addEventListener("click",(function(e){var t;(null===(t=e.target)||void 0===t?void 0:t.classList.contains("close"))&&E(h)})),window.addEventListener("hashchange",(function(){k(h)}))}}),[s,r,h,t,l,k,E]);var O=Object(o.useMemo)((function(){var e={spellChecker:!1,placeholder:"Write code here and share...",tabSize:Number(l.tabSize),maxHeight:"calc(100vh - ".concat(Na+70,"px)"),toolbar:["bold","italic","|","unordered-list","ordered-list","|","code","link","image","table","|",{name:"table-of-contents",action:function(e){var t=e.codemirror;E(t)},className:"fa fa-sitemap",title:"Table of Contents"},"side-by-side","preview","fullscreen"],unorderedListStyle:"-",status:!1,shortcuts:{toggleUnorderedList:null}};if(i===Ie.Slide){var t=new Zt(l.theme);e.previewRender=function(e,n){var a=t.render(e),r=a.html,i=a.css,o=this;return setTimeout((function(){o.style||(o.style=document.createElement("style"),document.head.appendChild(o.style)),o.style.innerHTML=i,n.innerHTML=r}),20),null}}return e}),[i,l,E]);return c.a.createElement(Xt.a,{className:l.theme===a.Dark?n.dark:"",getCodemirrorInstance:y,options:O})}!function(e){e.Red="#d8453c",e.Blue="#19abbf",e.Green="#699e3d",e.White="#cccccc",e.Yellow="#f3b328",e.Black="#444"}(on||(on={})),function(e){e[e.None=0]="None",e[e.Line=1]="Line",e[e.Eraser=2]="Eraser",e[e.Rect=3]="Rect",e[e.Selector=4]="Selector",e[e.Clear=5]="Clear",e[e.Settings=6]="Settings"}(cn||(cn={}));var un={isOpen:!1,color:on.Yellow,toolType:cn.None},dn=Object(E.c)({name:"board",initialState:un,reducers:{toggleBoard:function(e){e.isOpen=!e.isOpen},setTool:function(e,t){e.toolType=t.payload},setColor:function(e,t){e.color=t.payload}}}),pn=dn.actions,mn=(pn.toggleBoard,pn.setTool),fn=pn.setColor,hn=dn.reducer,vn=n(36),bn=n(37),gn=function(){function e(t){Object(O.a)(this,e),this.name=void 0,this.callbacks=void 0,this.name=t,this.callbacks=[]}return Object(w.a)(e,[{key:"on",value:function(e){this.callbacks.push(e)}},{key:"off",value:function(e){var t=this.callbacks.findIndex((function(t){return t===e}));this.callbacks.splice(t,1)}},{key:"toString",value:function(){return this.name}}]),e}(),yn=function(){function e(){Object(O.a)(this,e),this.events=void 0,this.events={}}return Object(w.a)(e,[{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.events[e]&&this.events[e].callbacks.forEach((function(e){e.apply(void 0,n)}))}},{key:"addEventListener",value:function(e,t){this.events[e]||(this.events[e]=new gn(e)),this.events[e].on(t)}},{key:"removeEventListener",value:function(e,t){t?this.events[e].off(t):delete this.events[e]}}]),e}(),kn=function(){function e(t){Object(O.a)(this,e),this.canvas=void 0,this.context=void 0,this.width=0,this.height=0,this.canvas=t,this.context=t.getContext("2d"),this.context.lineWidth=3,this.context.lineCap="round",this.canvas.className="canvas",this.setWidth(t.width),this.setHeight(t.height)}return Object(w.a)(e,[{key:"getCanvas",value:function(){return this.canvas}},{key:"getContext",value:function(){return this.context}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"setWidth",value:function(e,t){this.width=e,this.canvas.width=t?e*t:e,this.canvas.style.width="".concat(e,"px")}},{key:"setHeight",value:function(e,t){this.height=e,this.canvas.height=t?e*t:e,this.canvas.style.height="".concat(e,"px")}},{key:"setSize",value:function(e,t,n){this.setWidth(e,n),this.setHeight(t,n)}},{key:"clear",value:function(){this.getContext().clearRect(0,0,this.getWidth(),this.getHeight())}},{key:"resize",value:function(){var e=window.devicePixelRatio;e?(this.setSize(this.width,this.height,e),this.context.scale(e,e)):this.setSize(this.width,this.height)}}]),e}(),En=n(264),On=n.n(En);function wn(e,t){var n=t.points,a=t.color;e.strokeStyle=a,e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r+=1)e.lineTo(n[r].x,n[r].y);e.stroke()}function jn(e,t){var n,a=[],r=Object(Yt.a)(t.points);try{for(r.s();!(n=r.n()).done;){var i=n.value;a.push([i.x,i.y])}}catch(d){r.e(d)}finally{r.f()}a.length<=100&&(a=a.map((function(e,t){if(t>0){for(var n=a[t-1],r=e,i=(r[0]-n[0])/10,o=(r[1]-n[1])/10,c=[],l=1;l<10;l+=1)c.push([n[0]+i*l,n[1]+o*l]);return c}return[]})).flat());var o=On()(a,3);if(o.length){e.save(),e.beginPath(),e.strokeStyle=t.color||"#ff7043";var c=o[0];e.moveTo(c[0][0],c[0][1]);var l,s=Object(Yt.a)(o);try{for(s.s();!(l=s.n()).done;){var u=l.value;e.bezierCurveTo(u[1][0],u[1][1],u[2][0],u[2][1],u[3][0],u[3][1])}}catch(d){s.e(d)}finally{s.f()}e.stroke(),e.closePath(),e.restore()}}function Cn(e,t){e.save(),e.beginPath(),e.strokeStyle="#ff7043";var n,a=!1,r=Object(Yt.a)(t.points);try{for(r.s();!(n=r.n()).done;){var i=n.value;!1===a?(a=!0,e.moveTo(i.x,i.y)):e.lineTo(i.x,i.y)}}catch(o){r.e(o)}finally{r.f()}e.stroke(),e.closePath(),e.restore()}function xn(e){return{y:e.y+8,x:e.x+6}}function Sn(e,t){var n=e.x-t.x,a=e.y-t.y;return n*n+a*a}function Ln(e,t,n){var a=t.x,r=t.y,i=n.x-a,o=n.y-r;if(0!==i||0!==o){var c=((e.x-a)*i+(e.y-r)*o)/(i*i+o*o);c>1?(a=n.x,r=n.y):c>0&&(a+=i*c,r+=o*c)}return(i=e.x-a)*i+(o=e.y-r)*o}function Tn(e,t,n,a,r){for(var i=a,o=0,c=t+1;c<n;c+=1){var l=Ln(e[c],e[t],e[n]);l>i&&(o=c,i=l)}i>a&&(t+1<o&&Tn(e,t,o,a,r),r.push(e[o]),o+1<n&&Tn(e,o,n,a,r))}function Mn(e,t){var n=e.length-1,a=[];return a.push(e[0]),Tn(e,0,n,t,a),a.push(e[n]),a}function Dn(e,t){for(var n=e[0],a=n,r=[a],i=1,o=e.length;i<o;i+=1)Sn(n=e[i],a)>t&&(r.push(n),a=n);return a!==n&&r.push(n),r}function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Mn(Dn(e,t),t)}function Rn(e,t,n,a){var r,i,o={x:0,y:0,onLine1:!1,onLine2:!1},c=(a.y-n.y)*(t.x-e.x)-(a.x-n.x)*(t.y-e.y);if(0===c)return o;r=e.y-n.y,i=e.x-n.x;var l=(a.x-n.x)*r-(a.y-n.y)*i,s=(t.x-e.x)*r-(t.y-e.y)*i;return r=l/c,i=s/c,o.x=e.x+r*(t.x-e.x),o.y=e.y+r*(t.y-e.y),r>0&&r<1&&(o.onLine1=!0),i>0&&i<1&&(o.onLine2=!0),o}function zn(e){return{y:e.y,x:e.x,width:e.width,height:e.height}}function In(e,t){var n=e.y+e.height,a=e.x+e.width;return!(e.height>0?n<t.y:n>t.y)&&(!(e.y>t.y)&&(!(e.height>0?a<t.x:a>t.x)&&!(e.x>t.x)))}function An(e){return"rect"===e.type}function Wn(e,t){e.save(),e.strokeStyle=t.color,e.strokeRect(t.box.x,t.box.y,t.box.width,t.box.height),e.restore()}function Pn(e,t,n,a){return e.addEventListener(t,n,a)}function Hn(e,t,n,a){return e.removeEventListener(t,n,a)}var Bn={mouseup:"touchend",mouseout:"touchend",mousedown:"touchstart",mousemove:"touchmove"};function Vn(e,t,n,a){t(e,Bn[n],a),t(e,n,a)}var Gn,Un,Fn=function(){function e(t){Object(O.a)(this,e),this.options=void 0,this.type=void 0,this.update=void 0,this.options=t}return Object(w.a)(e,[{key:"getElementByID",value:function(e,t){return e.shapes.getElementByID(t)}},{key:"deleteByID",value:function(e,t){return e.shapes.deleteByID(t)}},{key:"clearAll",value:function(){var e=this;this.update((function(t){var n,a=Object(Yt.a)(t.shapes);try{for(a.s();!(n=a.n()).done;){var r=n.value;e.deleteByID(t,r.getID())}}catch(i){a.e(i)}finally{a.f()}}))}},{key:"setOption",value:function(e){this.options=Object(yt.a)(Object(yt.a)({},this.options),e)}}]),e}(),Kn=function(e){Object(vn.a)(n,e);var t=Object(bn.a)(n);function n(e,a,r){var i;return Object(O.a)(this,n),(i=t.call(this,r)).type=cn.Line,i.update=void 0,i.board=void 0,i.createID=void 0,i.previewLine=void 0,i.update=e,i.board=a,i.previewLine={type:"line",color:i.options.color,points:[]},i}return Object(w.a)(n,[{key:"mousedown",value:function(e){var t;this.previewLine=function(e,t){return{type:"line",color:t,points:[e]}}(e,null===(t=this.options)||void 0===t?void 0:t.color)}},{key:"mousemove",value:function(e,t){this.previewLine.points.push(e),t({line:Object(yt.a)({},this.previewLine)})}},{key:"mouseup",value:function(e){this.flushTask(),this.previewLine=Object(yt.a)(Object(yt.a)({},this.previewLine),{},{points:[]}),e({})}},{key:"flushTask",value:function(){var e=this;this.previewLine.points.length>0&&this.update((function(t){e.previewLine.points=Nn(e.previewLine.points),t.shapes.push(e.previewLine);var n=t.shapes.getLast();e.createID=n.getID(),e.board.drawAll(t.shapes)}))}}]),n}(Fn),Yn=function(e){Object(vn.a)(n,e);var t=Object(bn.a)(n);function n(e,a,r){var i;return Object(O.a)(this,n),(i=t.call(this,r)).type=cn.Rect,i.update=void 0,i.board=void 0,i.createID=void 0,i.previewRect=void 0,i.update=e,i.board=a,i.previewRect={type:"rect",color:i.options.color,box:{x:0,y:0,width:0,height:0},points:[]},i}return Object(w.a)(n,[{key:"mousedown",value:function(e){this.previewRect=function(e,t){return{type:"rect",color:t.color,box:{x:e.x,y:e.y,width:0,height:0},points:[{x:e.x,y:e.y}]}}(e,this.options)}},{key:"mousemove",value:function(e,t){var n=function(e,t){var n=zn(e.box),a=e.points[0],r=t.x-a.x,i=t.y-a.y,o=Math.abs(r),c=Math.abs(i);return n.x=a.x-(r>0?0:-r),n.y=a.y-(i>0?0:-i),n.width=o,n.height=c,n}(this.previewRect,e);this.previewRect.box=n,t({rect:Object(yt.a)({},this.previewRect)})}},{key:"mouseup",value:function(e){this.flushTask(),this.previewRect=Object(yt.a)(Object(yt.a)({},this.previewRect),{},{box:{x:0,y:0,height:0,width:0},points:[]}),e({})}},{key:"flushTask",value:function(){var e=this;0!==this.previewRect.box.width&&0!==this.previewRect.box.height&&this.update((function(t){t.shapes.push(e.previewRect);var n=t.shapes.getLast();e.createID=n.getID(),e.board.drawAll(t.shapes)}))}}]),n}(Fn),$n=[],Xn=function(){"function"===typeof Un&&(Un($n),$n=[])};function Jn(e){e?Xn():Gn=setTimeout((function(){Xn(),Jn(!1)}),50)}function _n(e,t){$n.push(e),void 0===Un&&(Un=t,Jn(!1))}function qn(){clearTimeout(Gn),"function"===typeof Un&&Jn(!0),Un=void 0}var Qn,Zn=function(e){Object(vn.a)(n,e);var t=Object(bn.a)(n);function n(e,a){var r;return Object(O.a)(this,n),(r=t.call(this)).type=cn.Eraser,r.update=void 0,r.board=void 0,r.eraserBoxSize=24,r.selectPoint=[],r.update=e,r.board=a,r}return Object(w.a)(n,[{key:"mousedown",value:function(e,t){this.selectPoint=[e,e],t({eraserPoints:Object(gt.a)(this.selectPoint)})}},{key:"mousemove",value:function(e,t){var n=this;_n(e,(function(e){var a=Nn(e);e.length<2||n.update((function(e){var r=xn(a[0]),i=xn(a[a.length-1]),o=function(t,a){var r,i=Object(Yt.a)(e.shapes);try{for(i.s();!(r=i.n()).done;){var o=r.value;if("eraser"!==o.type)if(An(o))In(o.box,a)&&n.deleteByID(e,o.getID());else for(var c=1;c<o.points.length;c+=1){var l=o.points[c-1],s=o.points[c];if(In(n.eraserBox(a),s)){n.deleteByID(e,o.getID());break}if(In(n.eraserBox(t),s)){n.deleteByID(e,o.getID());break}var u=Rn(t,a,l,s);if(u.onLine1&&u.onLine2){n.deleteByID(e,o.getID());break}}}}catch(d){i.e(d)}finally{i.f()}};n.selectPoint.length>0&&o(n.selectPoint[n.selectPoint.length-1],r);o(r,i),n.board.drawAll(e.shapes),n.selectPoint=[r,i],t({eraserPoints:Object(gt.a)(n.selectPoint)})}))}))}},{key:"mouseup",value:function(e){this.flushTask(),e({})}},{key:"flushTask",value:function(){qn(),this.selectPoint=[]}},{key:"eraserBox",value:function(e){var t=e.x-this.eraserBoxSize/2;return{y:e.y-this.eraserBoxSize/2,x:t,width:this.eraserBoxSize,height:this.eraserBoxSize}}}]),n}(Fn),ea=function(e){Object(vn.a)(n,e);var t=Object(bn.a)(n);function n(e,a){var r;return Object(O.a)(this,n),(r=t.call(this)).type=cn.Selector,r.update=void 0,r.board=void 0,r.selectedShape=void 0,r.update=e,r.board=a,r}return Object(w.a)(n,[{key:"mousedown",value:function(e){var t=this.findTarget(e);this.selectedShape=t?{shape:t,point:e}:void 0}},{key:"mousemove",value:function(e){var t=this;_n(e,(function(e){e.length<2||t.update((function(n){if(!t.isEmptySelectedShape()){var a=t.getElementByID(n,t.selectedShape.shape.getID());if(a&&"rect"===a.type){if(An(a)){var r=e[e.length-1],i=r.y-t.selectedShape.point.y,o=r.x-t.selectedShape.point.x;t.selectedShape.point=r,a.box=Object(yt.a)(Object(yt.a)({},zn(a.box)),{},{y:a.box.y+i,x:a.box.x+o}),a.points[0]={y:a.points[0].y+i,x:a.points[0].x+o}}t.board.drawAll(n.shapes)}}}))}))}},{key:"mouseup",value:function(){this.flushTask()}},{key:"flushTask",value:function(){qn()}},{key:"isEmptySelectedShape",value:function(){return!this.selectedShape}},{key:"findTarget",value:function(e){var t;return this.update((function(n){var a,r=Object(Yt.a)(n.shapes);try{for(r.s();!(a=r.n()).done;){var i=a.value;if("rect"===i.type&&In(i.box,e))return void(t=i)}}catch(o){r.e(o)}finally{r.f()}})),t}}]),n}(Fn),ta=function(e){Object(vn.a)(n,e);var t=Object(bn.a)(n);function n(e,a){var r;return Object(O.a)(this,n),(r=t.call(this)).type=cn.None,r.update=void 0,r.board=void 0,r.update=e,r.board=a,r}return Object(w.a)(n,[{key:"mousedown",value:function(){}},{key:"mousemove",value:function(){}},{key:"mouseup",value:function(){}},{key:"flushTask",value:function(){}}]),n}(Fn);!function(e){e[e.Drag=0]="Drag",e[e.Stop=1]="Stop"}(Qn||(Qn={}));var na=function(e){Object(vn.a)(n,e);var t=Object(bn.a)(n);function n(e,a){var r;return Object(O.a)(this,n),(r=t.call(this)).offsetY=0,r.offsetX=0,r.color=on.Black,r.dragStatus=Qn.Stop,r.lowerWrapper=void 0,r.upperWrapper=void 0,r.presenceMap=new Map,r.update=void 0,r.worker=void 0,r.lowerWrapper=new kn(e),r.upperWrapper=r.createUpperWrapper(),r.update=a,r.initialize(),r}return Object(w.a)(n,[{key:"initialize",value:function(){this.initializeSize(),this.initializeOffset(),this.emit=this.emit.bind(this),this.drawAll=this.drawAll.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.worker=new ta(this.update,this),Vn(this.upperWrapper.getCanvas(),Pn,"mouseup",this.onMouseUp),Vn(this.upperWrapper.getCanvas(),Pn,"mouseout",this.onMouseOut),Vn(this.upperWrapper.getCanvas(),Pn,"mousedown",this.onMouseDown),this.addEventListener("renderAll",this.drawAll)}},{key:"destroy",value:function(){Vn(this.upperWrapper.getCanvas(),Hn,"mouseup",this.onMouseUp),Vn(this.upperWrapper.getCanvas(),Hn,"mouseout",this.onMouseOut),Vn(this.upperWrapper.getCanvas(),Hn,"mousedown",this.onMouseDown),this.destroyUpperCanvas(),this.removeEventListener("renderAll")}},{key:"initializeOffset",value:function(){var e=this.lowerWrapper.getCanvas().getBoundingClientRect(),t=e.y,n=e.x;this.offsetY=t,this.offsetX=n}},{key:"initializeSize",value:function(){this.lowerWrapper.resize(),this.upperWrapper.resize()}},{key:"createUpperWrapper",value:function(){var e,t=document.createElement("canvas"),n=new kn(t);return n.setWidth(this.lowerWrapper.getWidth()),n.setHeight(this.lowerWrapper.getHeight()),null===(e=this.lowerWrapper.getCanvas().parentNode)||void 0===e||e.appendChild(t),n}},{key:"destroyUpperCanvas",value:function(){var e,t,n=null===(e=this.upperWrapper)||void 0===e?void 0:e.getCanvas();n&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n))}},{key:"setColor",value:function(e){this.color=e,this.worker.setOption({color:e})}},{key:"setWidth",value:function(e){this.lowerWrapper.setWidth(e),this.upperWrapper.setWidth(e),this.resize()}},{key:"setHeight",value:function(e){this.lowerWrapper.setHeight(e),this.upperWrapper.setHeight(e),this.resize()}},{key:"resize",value:function(){this.lowerWrapper.resize(),this.upperWrapper.resize()}},{key:"setTool",value:function(e){this.setMouseClass(e),this.worker.type!==e&&(this.worker.flushTask(),this.worker=this.createWorker(e))}},{key:"createWorker",value:function(e){if(e===cn.Line)return new Kn(this.update,this,{color:this.color});if(e===cn.Eraser)return new Zn(this.update,this);if(e===cn.Rect)return new Yn(this.update,this,{color:this.color});if(e===cn.Selector)return new ea(this.update,this);if(e===cn.None||e===cn.Clear||e===cn.Settings)return new ta(this.update,this);throw new TypeError("Undefined tool: ".concat(e))}},{key:"setMouseClass",value:function(e){this.upperWrapper.getCanvas().className="canvas canvas-upper",e===cn.Line||e===cn.Rect?this.upperWrapper.getCanvas().classList.add("crosshair","canvas-touch-none"):e===cn.Eraser?this.upperWrapper.getCanvas().classList.add("eraser","canvas-touch-none"):e===cn.Selector&&this.upperWrapper.getCanvas().classList.add("canvas-touch-none")}},{key:"getPointFromTouchyEvent",value:function(e){var t,n;return window.TouchEvent&&e instanceof TouchEvent?(t=e.touches[0].clientY,n=e.touches[0].clientX):(t=e.clientY,n=e.clientX),t+=window.scrollY,n+=window.scrollX,{y:t-this.offsetY,x:n-this.offsetX}}},{key:"onMouseDown",value:function(e){var t=this;Vn(this.upperWrapper.getCanvas(),Pn,"mousemove",this.onMouseMove),this.dragStatus=Qn.Drag;var n=this.getPointFromTouchyEvent(e);this.worker.mousedown(n,(function(e){t.emit("mousedown",e)}))}},{key:"onMouseMove",value:function(e){var t=this,n=this.getPointFromTouchyEvent(e);this.isOutside(n)?this.onMouseUp():this.dragStatus!==Qn.Stop&&this.worker.mousemove(n,(function(e){t.emit("mousemove",e)}))}},{key:"onMouseUp",value:function(){var e=this;Vn(this.upperWrapper.getCanvas(),Hn,"mousemove",this.onMouseMove),this.dragStatus=Qn.Stop,this.worker.mouseup((function(t){e.emit("mousedown",t)})),this.emit("mouseup")}},{key:"onMouseOut",value:function(){this.dragStatus=Qn.Stop,this.worker.flushTask(),this.emit("mouseout")}},{key:"updatePresence",value:function(e,t){this.clear(this.upperWrapper),this.presenceMap.set(e,JSON.parse(t.board||"{}"));var n,a=Object(Yt.a)(this.presenceMap.values());try{for(a.s();!(n=a.n()).done;){var r=n.value,i=r.eraserPoints,o=r.line,c=r.rect;i&&i.length>0&&Cn(this.upperWrapper.getContext(),{type:"eraser",points:i}),o&&o.points.length>0&&wn(this.upperWrapper.getContext(),o),c&&0!==c.box.height&&0!==c.box.width&&Wn(this.upperWrapper.getContext(),c)}}catch(l){a.e(l)}finally{a.f()}}},{key:"isOutside",value:function(e){return e.y<0||e.x<0||e.y>this.lowerWrapper.getHeight()||e.x>this.lowerWrapper.getWidth()}},{key:"drawAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lowerWrapper;this.clear(t);var n,a=Object(Yt.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;"line"===r.type?jn(t.getContext(),r):"eraser"===r.type?Cn(t.getContext(),r):"rect"===r.type&&Wn(t.getContext(),r)}}catch(i){a.e(i)}finally{a.f()}}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lowerWrapper;e.clear()}},{key:"clearBoard",value:function(){this.clear(this.lowerWrapper),this.clear(this.upperWrapper),this.worker.clearAll()}}]),n}(yn);function aa(e){var t=e.width,n=e.height,a=Object(o.useRef)(null),r=Object(o.useRef)(null),i=Object(u.b)(),l=Object(u.c)((function(e){return e.docState.client})),s=Object(u.c)((function(e){return e.docState.doc})),d=Object(u.c)((function(e){return e.boardState.toolType})),p=Object(u.c)((function(e){return e.boardState.color}));return Object(o.useEffect)((function(){if(!a.current)return function(){};var e=new na(a.current,s.update.bind(s));return r.current=e,function(){e.destroy()}}),[s]),Object(o.useEffect)((function(){if(!s)return function(){};var e=s.subscribe((function(e){var t;"remote-change"===e.type&&(null===(t=r.current)||void 0===t||t.drawAll(s.getRoot().shapes))}));return function(){e()}}),[s]),Object(o.useEffect)((function(){var e,t,n,a;if(!l||!s)return function(){};var i=l.subscribe((function(e){if("peers-changed"===e.type)for(var t=s.getKey(),n=e.value[t],a=0,i=Object.keys(n);a<i.length;a++){var o,c=i[a];null===(o=r.current)||void 0===o||o.updatePresence(c,n[c])}})),o=l.getID(),c=function(e){var t,n=JSON.stringify(e||"");null===(t=r.current)||void 0===t||t.updatePresence(o,{board:n}),null===l||void 0===l||l.updatePresence("board",n)};return null===(e=r.current)||void 0===e||e.addEventListener("mousemove",c),null===(t=r.current)||void 0===t||t.addEventListener("mousedown",c),null===(n=r.current)||void 0===n||n.addEventListener("mouseout",c),null===(a=r.current)||void 0===a||a.addEventListener("mouseup",c),function(){var e,t,n,a;i(),null===(e=r.current)||void 0===e||e.removeEventListener("mousemove",c),null===(t=r.current)||void 0===t||t.removeEventListener("mousedown",c),null===(n=r.current)||void 0===n||n.removeEventListener("mouseout",c),null===(a=r.current)||void 0===a||a.removeEventListener("mouseup",c)}}),[l,s]),Object(o.useEffect)((function(){var e,t=function(){d===cn.Rect&&i(mn(cn.Selector))};return null===(e=r.current)||void 0===e||e.addEventListener("mouseup",t),function(){var e;null===(e=r.current)||void 0===e||e.removeEventListener("mouseup",t)}}),[s,d,i]),Object(o.useEffect)((function(){var e,i,o;a.current&&(null===(e=r.current)||void 0===e||e.setWidth(t),null===(i=r.current)||void 0===i||i.setHeight(n),null===(o=r.current)||void 0===o||o.drawAll(s.getRoot().shapes))}),[s,t,n]),Object(o.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.setTool(d)}),[s,d]),Object(o.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.setColor(p)}),[s,p]),Object(o.useEffect)((function(){var e;d===cn.Clear&&(null===(e=r.current)||void 0===e||e.clearBoard(),i(mn(cn.None)))}),[s,d,i]),c.a.createElement("canvas",{ref:a})}var ra=n(564),ia=n(265),oa=n.n(ia),ca=n(268),la=n.n(ca),sa=n(266),ua=n.n(sa),da=n(267),pa=n.n(da),ma=n(269),fa=n.n(ma),ha=n(109);function va(e){var t=e.fontSize;return c.a.createElement(ha.a,{fontSize:t},c.a.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 480.001 480.001"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M333.142,350.846c0.115-0.115,0.215-0.239,0.323-0.357l129.681-129.706c10.878-10.878,16.864-25.368,16.855-40.8 c-0.01-15.409-5.999-29.865-16.854-40.694l-97.844-97.874c-10.853-10.845-25.326-16.817-40.75-16.817 c-15.426,0-29.895,5.974-40.741,16.82L16.855,308.329C5.974,319.21-0.012,333.713,0,349.168 c0.013,15.425,6.002,29.884,16.854,40.7l62.592,62.606c0.061,0.061,0.127,0.112,0.188,0.171c0.174,0.165,0.349,0.331,0.534,0.483 c0.082,0.067,0.171,0.126,0.255,0.19c0.175,0.135,0.349,0.271,0.532,0.395c0.07,0.047,0.145,0.085,0.215,0.13 c0.205,0.131,0.412,0.26,0.627,0.376c0.051,0.026,0.103,0.048,0.154,0.074c0.239,0.123,0.482,0.241,0.732,0.346 c0.033,0.014,0.067,0.024,0.101,0.037c0.269,0.108,0.54,0.208,0.819,0.293c0.034,0.011,0.07,0.017,0.104,0.027 c0.276,0.081,0.556,0.154,0.841,0.211c0.082,0.017,0.165,0.023,0.247,0.038c0.239,0.041,0.479,0.084,0.724,0.107 c0.33,0.033,0.663,0.051,0.998,0.051h137.91h159.308c5.522,0,10-4.478,10-10c0-5.522-4.478-10-10-10H248.566l84.22-84.236 C332.904,351.06,333.027,350.96,333.142,350.846z M220.285,435.404H90.66l-59.675-59.689 c-7.076-7.054-10.977-16.487-10.985-26.563c-0.008-10.106,3.897-19.582,10.996-26.681l129.825-129.803l151.091,151.091 L220.285,435.404z M174.965,178.527L297.953,55.56c7.069-7.069,16.516-10.963,26.6-10.963c10.085,0,19.536,3.895,26.609,10.962 l97.85,97.88c7.08,7.063,10.982,16.493,10.989,26.557c0.006,10.085-3.899,19.547-10.998,26.645l-122.95,122.974L174.965,178.527z"})))))}function ba(e){var t=e.fontSize;return c.a.createElement(ha.a,{fontSize:t},c.a.createElement("svg",{viewBox:"-36 0 392 392.40392",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"m43 355.03125c.492188 3.949219 3.273438 7.230469 7.085938 8.355469 3.816406 1.128906 7.933593-.109375 10.492187-3.152344l68.5-81.507813 72.972656 109.230469c3.058594 4.585938 9.25 5.828125 13.84375 2.777344l65.226563-43.285156c4.589844-3.046875 5.851562-9.234375 2.820312-13.835938l-72.304687-109.675781 101.714843-31.453125c3.800782-1.175781 6.542969-4.488281 6.984376-8.441406.441406-3.953125-1.5-7.792969-4.945313-9.777344l-300.195313-172.929687c-3.289062-1.894532-7.363281-1.765626-10.523437.332031-3.160156 2.097656-4.863281 5.804687-4.394531 9.566406zm242.539062-174.878906-92.539062 28.617187c-3.003906.929688-5.398438 3.21875-6.460938 6.179688-1.058593 2.960937-.664062 6.25 1.066407 8.875l74.152343 112.476562-48.613281 32.261719-74.832031-112.023438c-1.746094-2.617187-4.625-4.257812-7.765625-4.429687-.183594-.011719-.367187-.015625-.550781-.015625-2.953125 0-5.753906 1.308594-7.652344 3.566406l-62.320312 74.152344-37.421876-301.128906zm0 0"})))}function ga(e){var t=e.fontSize;return c.a.createElement(ha.a,{fontSize:t},c.a.createElement("svg",{enableBackground:"new 0 0 506.1 506.1",viewBox:"0 0 506.1 506.1",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"m489.609 506.1h-473.118c-9.108 0-16.491-7.384-16.491-16.491v-473.118c0-9.108 7.383-16.491 16.491-16.491h473.119c9.107 0 16.49 7.383 16.49 16.491v473.118c0 9.107-7.383 16.491-16.491 16.491zm-456.628-32.982h440.138v-440.137h-440.138z"})))}var ya=n(599),ka=n(592),Ea=n(562),Oa=n(559),wa=n(593),ja=n(103),Ca=Object(A.a)((function(e){return Object(W.a)({root:{minWidth:"320px",borderRadius:"4px"},header:{borderBottom:"1px solid ".concat(e.palette.text.disabled)},title:{padding:"12px 16px"},list:{padding:"8px 18px 18px 18px",lineHeight:"19px"},item:{display:"flex",justifyContent:"space-between",fontSize:"15px",marginTop:"12px",pointerEvents:"none"},itemTitle:{whiteSpace:"nowrap",display:"flex",alignItems:"center"},itemInfo:{minWidth:140,paddingLeft:"12px",borderRadius:"4px",textAlign:"left",pointerEvents:"auto"}})}));function xa(){var e=Object(u.b)(),t=Ca(),n=Object(u.c)((function(e){return e.docState.client})),l=Object(u.c)((function(e){return e.docState.doc})),s=Object(u.c)((function(e){return e.docState.preview})),d=Object(u.c)((function(e){return e.settingState.menu})),p=Object(o.useCallback)(Object(ja.a)((function(t){e(R(t))}),2e3),[]);Object(o.useEffect)((function(){if(!l)return function(){};var t=l.subscribe((function(t){"remote-change"===t.type&&e(tt(l.getRoot().preview||Ie.HTML))}));return function(){t()}}),[l]);var m=Object(o.useCallback)((function(e){var t=e.target.value;p(t)}),[p]),f=Object(o.useCallback)((function(t){var a=t.target.value;n&&e(ie(a)),e(z(a))}),[e]),h=Object(o.useCallback)((function(t){if(l){var n=t.target.value;l.update((function(e){e.preview=n})),e(tt(n))}}),[l,e]);function v(t){return function(n){e(t(n.target.value))}}var b=Object(o.useCallback)((function(t,n){e(M(n))}),[e,M]);return c.a.createElement("div",{className:t.root},c.a.createElement(me.a,null,c.a.createElement("header",{className:t.header},c.a.createElement(G.a,{className:t.title,variant:"h6"},"Settings"))),c.a.createElement("div",{className:t.list},c.a.createElement("div",{className:t.item},c.a.createElement("div",{className:t.itemTitle},"Name"),c.a.createElement(Oa.a,{className:t.itemInfo},c.a.createElement(wa.a,{id:"standard-basic",variant:"standard",defaultValue:d.userName,onInput:m}))),c.a.createElement("div",{className:t.item},c.a.createElement("div",{className:t.itemTitle},"Color"),c.a.createElement(Oa.a,{className:t.itemInfo},c.a.createElement("input",{type:"color",defaultValue:d.userColor,onChange:f}))),c.a.createElement("div",{className:t.item},c.a.createElement("div",{className:t.itemTitle},"Preview"),c.a.createElement(Oa.a,{className:t.itemInfo},c.a.createElement(ka.a,{name:"preview",value:s,onChange:h,displayEmpty:!0},Object.entries(Ie).map((function(e){var t=Object(K.a)(e,2),n=t[0],a=t[1];return c.a.createElement(Ea.a,{value:a,key:a},n)}))))),c.a.createElement("div",{className:t.item},c.a.createElement("div",{className:t.itemTitle},"Tab Size"),c.a.createElement(Oa.a,{className:t.itemInfo},c.a.createElement(ka.a,{value:d.tabSize,onChange:v(N),displayEmpty:!0},Object.entries(i).map((function(e){var t=Object(K.a)(e,2),n=t[0],a=t[1];return c.a.createElement(Ea.a,{value:a,key:n},"".concat(a," spaces"))}))))),c.a.createElement("div",{className:t.item},c.a.createElement("div",{className:t.itemTitle},"Key Binding"),c.a.createElement(Oa.a,{className:t.itemInfo},c.a.createElement(ka.a,{value:d.codeKeyMap,onChange:v(D),displayEmpty:!0},Object.entries(r).map((function(e){var t=Object(K.a)(e,2),n=t[0],a=t[1];return c.a.createElement(Ea.a,{value:a,key:a},n)}))))),c.a.createElement("div",{className:t.item},c.a.createElement("div",{className:t.itemTitle},"Dark Mode"),c.a.createElement(Oa.a,{className:t.itemInfo},c.a.createElement(ya.a,{checked:d.theme===a.Dark,onChange:b})))))}var Sa=n(563),La=Object(A.a)((function(e){return Object(W.a)({button:{marginLeft:3,marginRight:3,padding:8},select:{marginLeft:3,marginRight:3,padding:8,color:e.palette.primary.main},box:{width:"184px",display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(1)}},colorIcon:{"&:hover":{cursor:"pointer"},width:e.spacing(3.1),height:e.spacing(3.1)},badge:{backgroundColor:function(e){return e.color}}})}));function Ta(e){var t=e.toolType,n=e.Icon,a=e.tooltip,r=e.fontSize,i=Object(u.b)(),l=Object(u.c)((function(e){return e.boardState.toolType})),s=Object(u.c)((function(e){return e.boardState.color})),d=Object(o.useState)(),p=Object(K.a)(d,2),m=p[0],f=p[1],h=La({color:s}),v=Object(o.useCallback)((function(e){f(e.currentTarget)}),[l]),b=Object(o.useCallback)((function(){f(void 0)}),[]),g=Object(o.useCallback)((function(e){l!==t?i(mn(t)):v(e)}),[l,s]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(X.a,{title:a,arrow:!0,className:l===t?h.select:h.button},c.a.createElement(P.a,{"aria-label":a,onClick:g},l===t?c.a.createElement(Sa.a,{variant:"dot",classes:{badge:h.badge},anchorOrigin:{vertical:"bottom",horizontal:"right"}},c.a.createElement(n,{fontSize:r})):c.a.createElement(n,{fontSize:r}))),c.a.createElement(Q,{anchorEl:m,onClose:b,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"}},c.a.createElement(me.a,{p:2,className:h.box},Object.entries(on).map((function(e){var n,a=Object(K.a)(e,2),r=a[0],o=a[1],u=s===o&&l===t;return c.a.createElement(X.a,{key:r,title:r,arrow:!0},c.a.createElement(me.a,{border:3,borderRadius:"50%",borderColor:u?"primary.main":""},c.a.createElement(Y.a,{className:h.colorIcon,style:{backgroundColor:o},onClick:(n=o,function(){i(mn(t)),i(fn(n)),b()})}," ")))})))))}var Ma=Object(A.a)((function(e){return Object(W.a)({root:{marginTop:60,display:"flex",flexDirection:"column"},divider:{marginTop:5,marginBottom:5},button:{marginLeft:3,marginRight:3,padding:8},select:{marginLeft:3,marginRight:3,padding:8,color:e.palette.primary.main}})}));function Da(){var e=Ma(),t=Object(u.b)(),n=Object(u.c)((function(e){return e.boardState.toolType})),a=Object(o.useState)(),r=Object(K.a)(a,2),i=r[0],l=r[1],s=function(e){return function(){t(mn(e))}},d=Object(o.useCallback)((function(e){t(mn(cn.Settings)),l(e.currentTarget)}),[t]),p=Object(o.useCallback)((function(){l(void 0),t(mn(cn.None))}),[t]);return c.a.createElement("div",{className:e.root},c.a.createElement(X.a,{title:"Code",arrow:!0,className:n===cn.None?e.select:e.button},c.a.createElement(P.a,{"aria-label":"Code",onClick:s(cn.None)},c.a.createElement(oa.a,{fontSize:"small"}))),c.a.createElement(Ta,{toolType:cn.Line,Icon:ua.a,fontSize:"small",tooltip:"Brush"}),c.a.createElement(Ta,{toolType:cn.Rect,Icon:ga,fontSize:"small",tooltip:"Shape"}),c.a.createElement(X.a,{title:"Selector",arrow:!0,className:n===cn.Selector?e.select:e.button},c.a.createElement(P.a,{"aria-label":"selector",onClick:s(cn.Selector)},c.a.createElement(ba,{fontSize:"small"}))),c.a.createElement(X.a,{title:"Eraser",arrow:!0,className:n===cn.Eraser?e.select:e.button},c.a.createElement(P.a,{"aria-label":"eraser",onClick:s(cn.Eraser)},c.a.createElement(va,{fontSize:"small"}))),c.a.createElement(X.a,{title:"Clear",arrow:!0,className:e.button},c.a.createElement(P.a,{"aria-label":"selector",onClick:s(cn.Clear)},c.a.createElement(pa.a,{fontSize:"default"}))),c.a.createElement(ra.a,{className:e.divider}),c.a.createElement(X.a,{title:"Settings",arrow:!0},c.a.createElement(P.a,{"aria-label":"settings",onClick:d},c.a.createElement(la.a,{fontSize:"small"}))),c.a.createElement(X.a,{title:"GitHub",arrow:!0,className:e.button},c.a.createElement(P.a,{"aria-label":"selector",href:"https://github.com/yorkie-team/codepair"},c.a.createElement(fa.a,{fontSize:"default"}))),c.a.createElement(Q,{anchorEl:i,onClose:p},c.a.createElement(xa,null)))}var Na=64,Ra=Object(A.a)((function(){return Object(W.a)({root:{flexGrow:1,display:"flex"},editor:{width:"calc(100% - ".concat(46,"px)"),flex:"0 0 auto"},codeEditor:{width:"100%",height:"calc(100vh - ".concat(Na,"px)")},canvas:{top:Na,height:"calc(100vh - ".concat(Na,"px)"),width:"calc(100% - ".concat(46,"px)"),position:"fixed",pointerEvents:function(e){return e===cn.None?"none":"auto"}}})}));function za(e){var t=e.tool,n=Ra(t),a=Object(o.useState)(0),r=Object(K.a)(a,2),i=r[0],l=r[1],s=Object(o.useState)(0),u=Object(K.a)(s,2),d=u[0],p=u[1],m=Object(o.useRef)(null),f=Object(o.useRef)(null),h=Object(o.useCallback)((function(){var e;t===cn.None&&(null===(e=f.current)||void 0===e||e.focus())}),[t]);return Object(o.useEffect)((function(){var e=function(){var e;if(m.current){var t=null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect();l(t.width),p(t.height)}};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),c.a.createElement("div",{className:n.root,onClick:h,"aria-hidden":"true"},c.a.createElement("div",{className:n.editor,ref:m},c.a.createElement("div",{className:n.codeEditor},c.a.createElement(sn,{forwardedRef:f}),c.a.createElement("div",{id:"tableOfContents",style:{display:"none"}})),c.a.createElement("div",{className:n.canvas},c.a.createElement(aa,{width:i,height:d}))),c.a.createElement(Da,null))}var Ia=Object(A.a)((function(){return Object(W.a)({loading:{display:"flex",height:"calc(100vh - ".concat(Na,"px)"),alignItems:"center",justifyContent:"center"}})})),Aa=function(e){var t=e.docKey,n=Ia(),a=Object(u.b)(),r=Object(u.c)((function(e){return e.docState.client})),i=Object(u.c)((function(e){return e.docState.doc})),l=Object(u.c)((function(e){return e.docState.status})),s=Object(u.c)((function(e){return e.boardState.toolType})),d=Object(u.c)((function(e){return e.docState.loading})),p=Object(u.c)((function(e){return e.docState.errorMessage}));return Object(o.useEffect)((function(){return a($e()),function(){a(qe())}}),[]),Object(o.useEffect)((function(){if(!r||!i)return function(){};var e=r.subscribe((function(e){if("peers-changed"===e.type){var t=i.getKey(),n=e.value[t];a(oe({myClientID:r.getID(),changedPeers:n}))}l===We.Connect&&("status-changed"===e.type&&"deactivated"===e.value||"stream-connection-status-changed"===e.type&&"disconnected"===e.value||"document-synced"===e.type&&"sync-failed"===e.value)?a(at(We.Disconnect)):l===We.Disconnect&&("peers-changed"===e.type||"documents-changed"===e.type||"status-changed"===e.type&&"activated"===e.value||"stream-connection-status-changed"===e.type&&"connected"===e.value||"document-synced"===e.type&&"synced"===e.value)&&a(at(We.Connect))}));return function(){e()}}),[r,i,l]),Object(o.useEffect)((function(){return a(Qe(t)),function(){a(Ze())}}),[t]),Object(o.useEffect)((function(){function e(){return(e=Object(Ve.a)(Be.a.mark((function e(){return Be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&i){e.next=2;break}return e.abrupt("return");case 2:return a(et(!0)),e.next=5,a(Xe({client:r,doc:i}));case 5:a(nt(i.getRoot().mode||Ae.Markdown)),a(tt(i.getRoot().preview||Ie.HTML)),a(et(!1));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){a(et(!0))}}),[t,r,i]),p?c.a.createElement("div",null,c.a.createElement(Ut.a,{open:!0,anchorOrigin:{vertical:"top",horizontal:"center"}},c.a.createElement(Ft.a,{severity:"warning"},p||"fail to attach document"))):!d&&r&&i?c.a.createElement(za,{tool:s}):c.a.createElement(me.a,{className:n.loading},c.a.createElement(Kt.a,{color:"inherit"}))},Wa=n(56),Pa=n(273),Ha=n(569),Ba=n(576),Va=n(579),Ga=n(560),Ua=n(584),Fa=n(600),Ka=n(566),Ya=n(567),$a=n(568),Xa=n(570),Ja=n(571),_a=n(572),qa=n(573),Qa=n(574),Za=n(575),er=n(577),tr=n(578),nr=n(580),ar=n(581),rr=n(582),ir=n(583),or=n(585);function cr(e,t,n){t.forEach((function(t){n(t,e),cr(t,t.links||[],n)}))}function lr(e,t){var n=null;return cr(null,e,(function(e){t(e)&&(n=e)})),n}function sr(){var e=document.title,t=document.querySelector(".CodeMirror");if(t){for(var n=t.CodeMirror.getDoc(),a=n.lineCount(),r=[],i=0;i<a;i+=1){var o=n.getLine(i).trim(),c=o.match(/^(#+)\s+(.*)/);if(c){var l=c[1].length,s=c[2];r.push({level:l,text:s,originalText:o});break}}if(r.length>0){var u=r[0].text;u&&(e=u)}}return e}var ur=Object(A.a)((function(e){var t;return Object(W.a)({title:{flexGrow:1,padding:"15px 16px",backgroundColor:"#f5f5f5"},drawer:(t={position:"absolute",left:0,top:0,right:0,bottom:0,flexShrink:0,transform:function(e){return"translateX(".concat(e.open?0:-300,"px) translateZ(0)")}},Object(Wa.a)(t,"& .MuiDrawer-paper",{width:300,boxSizing:"border-box",position:"absolute",transition:"width 225ms cubic-bezier(0, 0, 0.2, 1) 0ms"}),Object(Wa.a)(t,"& .MuiListItem-root",{paddingTop:2,paddingBottom:2}),t),listItemText:Object(Wa.a)({},"& .MuiTypography-root",{fontSize:"0.875rem",paddingLeft:8,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),listSubHeader:Object(Wa.a)({"line-height":1.5},"&:hover .group-item-button",{visibility:"visible !important"}),listItem:{"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},sidebarItem:Object(Wa.a)({},"&:hover .sidebar-item-more",{visibility:"visible !important"}),level0:{paddingLeft:e.spacing(1)},level1:{paddingLeft:e.spacing(3)},level2:{paddingLeft:e.spacing(5)},level3:{paddingLeft:e.spacing(7)},level4:{paddingLeft:e.spacing(9)},level5:{paddingLeft:e.spacing(10)},level6:{paddingLeft:e.spacing(12)},level7:{paddingLeft:e.spacing(14)},level8:{paddingLeft:e.spacing(16)},level9:{paddingLeft:e.spacing(18)},level10:{paddingLeft:e.spacing(20)},moreMenu:{}})}));function dr(e){var t=e.open,n=e.onClick;return t?c.a.createElement(Ka.a,{fontSize:"small",onClick:function(e){e.stopPropagation(),e.preventDefault(),n()}}):c.a.createElement(Ya.a,{fontSize:"small",onClick:function(e){e.stopPropagation(),e.preventDefault(),n()}})}var pr=["Add link","Add current page","Rename","Delete link","Update link","-","Open link as new tab","Copy link"],mr=["Add child group","Add next group","Rename","-","Delete"];function fr(e){var t=e.startRename,n=e.startOpenLinkAsNewTab,a=e.startUpdateLink,r=e.startCopyLink,i=e.startDeleteLink,o=e.startAddLink,l=e.startAddCurrentPage,s=ur({open:!0}),u=c.a.useState(null),d=Object(K.a)(u,2),p=d[0],m=d[1],f=Boolean(p),h=function(e){"Open link as new tab"===e?n():"Rename"===e?t():"Copy link"===e?r():"Delete link"===e?i():"Add link"===e?o():"Add current page"===e?l():"Update link"===e&&a(),m(null)};return c.a.createElement("div",null,c.a.createElement(P.a,{onClick:function(e){m(e.currentTarget)},size:"small"},c.a.createElement($a.a,null)),c.a.createElement(Pa.a,{id:"long-menu",className:s.moreMenu,MenuListProps:{"aria-labelledby":"long-button"},anchorEl:p,open:f,onClose:h,PaperProps:{style:{}},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},pr.map((function(e){return"-"===e?c.a.createElement(ra.a,{key:"".concat(e,"-").concat(Date.now())}):c.a.createElement(Ea.a,{key:e,onClick:function(){return h(e)},style:{color:"Delete link"===e?"red":void 0}},c.a.createElement(Ha.a,{style:{minWidth:30}},"Delete link"===e?c.a.createElement(Xa.a,{style:{color:"red"}}):void 0,"Add link"===e?c.a.createElement(Ja.a,null):void 0,"Add current page"===e?c.a.createElement(Ja.a,null):void 0,"Rename"===e?c.a.createElement(_a.a,null):void 0,"Open link as new tab"===e?c.a.createElement(qa.a,null):void 0,"Copy link"===e?c.a.createElement(Qa.a,null):void 0,"Update link"===e?c.a.createElement(Za.a,null):void 0),c.a.createElement(Ba.a,{primary:e}))}))))}function hr(e){var t=e.startRename,n=e.startDeleteGroup,a=e.startAddGroup,r=e.startAddChildGroup,i=c.a.useState(null),o=Object(K.a)(i,2),l=o[0],s=o[1],u=Boolean(l),d=function(e){"Rename"===e?t():"Delete"===e?n():"Add next group"===e?a():"Add child group"===e&&r(),s(null)};return c.a.createElement("div",null,c.a.createElement(P.a,{onClick:function(e){s(e.currentTarget)},size:"small",disableRipple:!0},c.a.createElement($a.a,null)),c.a.createElement(Pa.a,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:l,open:u,onClose:d,PaperProps:{style:{maxHeight:216,width:200}},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},mr.map((function(e){return"-"===e?c.a.createElement(ra.a,{key:"".concat(e,"-").concat(Date.now())}):c.a.createElement(Ea.a,{key:e,onClick:function(){return d(e)},disableRipple:!0,style:{color:"Delete"===e?"red":void 0}},c.a.createElement(Ha.a,null,"Delete"===e?c.a.createElement(Xa.a,{style:{color:"red"}}):void 0,"Rename"===e?c.a.createElement(er.a,null):void 0,"Add next group"===e?c.a.createElement(tr.a,null):void 0,"Add child group"===e?c.a.createElement(Ja.a,null):void 0),c.a.createElement(Ba.a,{primary:e}))}))))}function vr(e){var t=e.group,n=e.level,a=Object(u.b)(),r=Object(o.useRef)(null),i=Object(u.c)((function(e){return e.linkState.opens})),l=ur({open:!0}),s=Object(o.useState)(!1),d=Object(K.a)(s,2),p=d[0],m=d[1],f=Object(o.useRef)(t.name),h=c.a.useState(!1),v=Object(K.a)(h,2),b=v[0],g=v[1],y=function(){g(!1)},k=Object(o.useMemo)((function(){switch(n){case 0:default:return l.level0;case 1:return l.level1;case 2:return l.level2;case 3:return l.level3;case 4:return l.level4;case 5:return l.level5;case 6:return l.level6;case 7:return l.level7;case 8:return l.level8;case 9:return l.level9;case 10:return l.level10}}),[n,l]);return c.a.createElement(Va.a,{className:[k,l.listSubHeader].join(" "),style:{display:"flex",alignItems:"center"},onDoubleClick:function(e){e.stopPropagation(),m(!0)}},i[t.id]?c.a.createElement(P.a,{size:"small",onClick:function(){return a(St(t.id))},style:{flex:"none"}},c.a.createElement(nr.a,null)):c.a.createElement(P.a,{size:"small",onClick:function(){return a(St(t.id))},style:{flex:"none"}},c.a.createElement(ar.a,null)),p?c.a.createElement(Ga.a,{ref:r,autoFocus:!0,defaultValue:f.current,onBlur:function(){m(!1),a(Lt({id:t.id,name:f.current}))},onChange:function(e){f.current=e.target.value},onKeyUp:function(e){"Escape"===e.key?m(!1):"Enter"===e.key&&(m(!1),a(Lt({id:t.id,name:f.current})))}}):c.a.createElement("div",{style:{flex:1,paddingLeft:8,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:t.name},t.name),c.a.createElement("div",{className:"group-item-button",style:{flex:"none",display:"flex",alignItems:"center",visibility:"hidden"}},c.a.createElement(P.a,{disableRipple:!0,size:"small",style:{flex:"none"},onClick:function(){a(Rt({parentId:t.id,name:"New Link"}))}},c.a.createElement(rr.a,null)),p?void 0:c.a.createElement(hr,{startRename:function(){m(!0)},startDeleteGroup:function(){g(!0)},startAddGroup:function(){a(At({id:t.id,name:"New Group"}))},startAddChildGroup:function(){a(Wt({parentId:t.id,name:"New Group"}))}})),c.a.createElement(Ee.a,{open:b,onClose:y,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},c.a.createElement(Oe.a,{id:"alert-dialog-title"},"Confirm"),c.a.createElement(we.a,null,c.a.createElement(Se.a,{id:"alert-dialog-description"},"Are you sure to delete this group?")),c.a.createElement(je.a,null,c.a.createElement(fe.a,{onClick:y},"Cancel"),c.a.createElement(fe.a,{onClick:function(){a(Nt({id:t.id})),y()},autoFocus:!0,variant:"contained",color:"primary"},"OK"))))}function br(e){var t,n=e.item,a=e.level,r=Object(u.b)(),i=Object(u.c)((function(e){return e.linkState.opens})),l=Object(o.useRef)(n.name),s=Object(o.useState)(!1),d=Object(K.a)(s,2),p=d[0],f=d[1],h=Object(m.f)().docKey,v=ur({open:i[n.id]}),b=c.a.useState(!1),g=Object(K.a)(b,2),y=g[0],k=g[1],E=function(){k(!1)},O=c.a.useState(!1),w=Object(K.a)(O,2),j=w[0],C=w[1],x=Object(o.useCallback)((function(){r(St(n.id))}),[n.id,r]),S=Object(o.useCallback)((function(e){r(Rt({parentId:n.id,name:e}))}),[n.id,r]),L=Object(o.useCallback)((function(){r(Dt({id:n.id}))}),[n.id,r]),T=Object(o.useCallback)((function(){r(Mt({id:n.id,name:sr(),fileLink:h}))}),[n.id,r,h]),M=Object(o.useCallback)((function(){var e=n.fileLink||"";"pairy"===n.linkType&&(e="".concat(window.location.origin,"/").concat(n.fileLink)),window.navigator.clipboard.writeText(e).then((function(){C(!0)}))}),[n]),D=Object(o.useCallback)((function(){r(Tt({parentId:n.id,name:sr(),fileLink:h}))}),[n.id,h,r]),N=Object(o.useCallback)((function(e){r(Lt({id:n.id,name:e}))}),[n.id,r]),R=Object(o.useMemo)((function(){switch(a){case 0:default:return v.level0;case 1:return v.level1;case 2:return v.level2;case 3:return v.level3;case 4:return v.level4;case 5:return v.level5;case 6:return v.level6;case 7:return v.level7;case 8:return v.level8;case 9:return v.level9;case 10:return v.level10}}),[a,v]);return c.a.createElement(te.a,{className:[R,v.sidebarItem].join(" "),button:!0,selected:h===n.fileLink,disableRipple:!0},(null===(t=n.links)||void 0===t?void 0:t.length)?c.a.createElement(dr,{open:i[n.id],onClick:x}):c.a.createElement(ir.a,{fontSize:"small"}),p?c.a.createElement(Ga.a,{defaultValue:l.current,onChange:function(e){l.current=e.target.value},onKeyUp:function(e){"Enter"===e.key&&(f(!1),N(l.current))}}):c.a.createElement(Ba.a,{primary:n.name,className:v.listItemText,title:n.name,onClick:function(e){if(e.metaKey)if("pairy"===n.linkType)window.open("/".concat(n.fileLink),n.fileLink);else window.open(n.fileLink,"_blank");else if(n.fileLink)if("pairy"===n.linkType)window.location.href="/".concat(n.fileLink);else window.open(n.fileLink,"_blank")}}),c.a.createElement("div",{className:"sidebar-item-more",style:{display:"flex",alignItems:"center",justifyContent:"center",flex:"none",visibility:"hidden"}},p?void 0:c.a.createElement(fr,{startOpenLinkAsNewTab:function(){if(n.fileLink)if("pairy"===n.linkType)window.open("/".concat(n.fileLink),n.fileLink);else window.open(n.fileLink,"_blank")},startRename:function(){f(!0)},startUpdateLink:function(){T()},startCopyLink:function(){M()},startDeleteLink:function(){k(!0)},startAddLink:function(){S("Untitled name")},startAddCurrentPage:function(){D()}})),c.a.createElement(Ee.a,{open:y,onClose:E,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},c.a.createElement(Oe.a,{id:"alert-dialog-title"},"Confirm"),c.a.createElement(we.a,null,c.a.createElement(Se.a,{id:"alert-dialog-description"},"If you delete the link, it cannot be recovered.Are you sure you want to delete it anyway?")),c.a.createElement(je.a,null,c.a.createElement(fe.a,{onClick:E},"Cancel"),c.a.createElement(fe.a,{onClick:L,autoFocus:!0,variant:"contained",color:"primary"},"OK"))),c.a.createElement(Ut.a,{open:j,autoHideDuration:1e3,anchorOrigin:{vertical:"bottom",horizontal:"right"},onClose:function(){C(!1)},message:"Copy link"}))}function gr(e){var t=e.links,n=e.level,a=Object(u.c)((function(e){return e.linkState.opens}));return c.a.createElement(ee.a,{style:{padding:0}},Object(gt.a)(t).map((function(e){return c.a.createElement(o.Fragment,{key:e.id},"group"===e.type?c.a.createElement(vr,{key:e.id,group:e,level:n}):c.a.createElement(br,{key:e.id,item:e,level:n}),e.links&&c.a.createElement(Ua.a,{in:a[e.id],timeout:"auto",unmountOnExit:!0},c.a.createElement(gr,{links:Object(gt.a)(e.links),level:n+1})))})))}function yr(e){var t=e.group,n=Object(u.c)((function(e){return e.linkState.opens}));return c.a.createElement(me.a,null,c.a.createElement(vr,{group:t,level:0}),c.a.createElement(Ua.a,{in:n[t.id],timeout:"auto",unmountOnExit:!0},c.a.createElement(gr,{links:Object(gt.a)(t.links),level:1})))}function kr(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.linkState})),n=Object(u.c)((function(e){return e.linkState.openTab})),a=Object(o.useRef)(!1),r=ur({open:n}),i=Object(m.f)().docKey,l=Object(o.useCallback)((function(n){var a=[],r=-1;if(function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,o=!1,c=0;c<t.length;c+=1){if(a[n]=t[c].id,i(t[c])){r=n,o=!0;break}if(t[c].links&&e(t[c].links,n+1,i)){o=!0;break}}return o}(t.groups,0,(function(e){return e.id===n})),r>-1){var i={};a.forEach((function(e){i[e]=!0})),e(zt(i))}}),[t.groups,e]);return Object(o.useEffect)((function(){if(!a.current&&i){var e=lr(t.groups,(function(e){return e.fileLink===i&&"pairy"===e.linkType}));e&&(l(e.id),a.current=!0)}}),[i,l,t.groups]),c.a.createElement(Fa.a,{variant:"permanent",className:r.drawer,open:t.openTab},c.a.createElement(Va.a,null,c.a.createElement(me.a,{display:"flex",alignItems:"center",justifyContent:"space-between"},c.a.createElement(G.a,{variant:"h6",style:{fontWeight:400,fontSize:14}},"Links"),c.a.createElement(P.a,{onClick:function(){e(xt())}},n?c.a.createElement(or.a,null):c.a.createElement(Ya.a,null)))),t.groups.map((function(e){return c.a.createElement(yr,{key:e.id,group:e})})),c.a.createElement("div",{style:{position:"absolute",bottom:0,right:0,left:0,display:"flex",flexDirection:"column",alignItems:"center"}},c.a.createElement(fe.a,{variant:"outlined",disableRipple:!0,style:{width:"80%",margin:"0 auto"},onClick:function(){e(It("New Group"))}},c.a.createElement(rr.a,{fontSize:"small"}),"Group"),c.a.createElement(me.a,{height:30})))}var Er=Object(A.a)((function(){return Object(W.a)({root:{flexGrow:1},sidebarArea:{width:function(e){return e.open?300:0},flexGrow:0,flex:"none",position:"relative",transition:"width 225ms cubic-bezier(0, 0, 0.2, 1) 0ms"},layout:{width:"100%",height:"100%",display:"flex",flexDirection:"row"},editorArea:{width:"100%",height:"100%",display:"flex",flexDirection:"column"}})}));function Or(e){var t=Object(u.c)((function(e){return e.linkState.openTab})),n=Object(u.c)((function(e){return e.settingState.menu})),a=Er({open:t}),r=Object(m.e)(),i=e.match.params.docKey;return Object(o.useEffect)((function(){p.a.send("pageview")}),[r]),c.a.createElement("div",{className:a.root,"data-theme":n.theme},c.a.createElement(Gt,null),c.a.createElement("div",{className:a.layout},c.a.createElement("div",{className:a.sidebarArea},c.a.createElement(kr,null)),c.a.createElement("div",{className:a.editorArea},c.a.createElement(Aa,{docKey:i}))))}var wr=Object(f.a)();h.a({dsn:"".concat("https://d287d6df8c6f423189266360055e6ca7@o553194.ingest.sentry.io/5680102"),release:"codepair@".concat("3abdf52"),integrations:[new b.a.BrowserTracing({routingInstrumentation:v.a(wr)})],tracesSampleRate:1});var jr=function(){var e=Object(u.c)((function(e){return e.settingState.menu})),t=Object(o.useMemo)((function(){return Object(y.a)({palette:{type:e.theme===a.Dark?"dark":"light",primary:{main:"#d8b01a"},secondary:{main:"#e6b602"}}})}),[e]),n=Object(o.useCallback)((function(){return c.a.createElement(m.a,{to:"/".concat(Math.random().toString(36).substring(7))})}),[]);return c.a.createElement(k.a,{theme:t},c.a.createElement(g.a,null),c.a.createElement(m.c,{history:wr},c.a.createElement(m.d,null,c.a.createElement(m.b,{path:"/",exact:!0,render:n}),c.a.createElement(m.b,{path:"/:docKey",exact:!0,component:Or}))))},Cr=n(55),xr=Object(Cr.c)({docState:rt,peerState:ce,settingState:I,boardState:hn,linkState:Pt}),Sr=Object(E.a)({reducer:xr,middleware:Object(E.d)({serializableCheck:{ignoredActions:["doc/attach/fulfilled","doc/activate/fulfilled"],ignoredPaths:["docState.client","docState.doc"]},immutableCheck:{ignoredPaths:["docState.client","docState.doc"]}})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(496);var Lr="".concat("G-Y5SQ469VBQ");Lr&&p.a.initialize(Lr),s.a.render(c.a.createElement(u.a,{store:Sr},c.a.createElement(jr,null)),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[497,1,2]]]);
//# sourceMappingURL=main.dd046371.chunk.js.map